#!/bin/bash

# 测试远程服务器 /api/chat 接口

echo "正在测试远程服务器 API..."
echo ""

# 测试请求
curl -X POST http://34.72.125.220:3000/api/chat \
  -H "Content-Type: application/json" \
  -H "Cookie: sb-34-auth-token=base64-eyJhY2Nlc3NfdG9rZW4iOiJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKemRXSWlPaUpoTldaaU1qTTNNaTFsTnpObUxUUmpOamd0T0RGbE1TMWtOamsxWlRsaE56Sm1aVElpTENKaGRXUWlPaUpoZFhSb1pXNTBhV05oZEdWa0lpd2laWGh3SWpveE56Y3dOVE0yTnpNMUxDSnBZWFFpT2pFM056QTFNek14TXpVc0ltVnRZV2xzSWpvaWNYZGxRR0YwYjIxekxtUmxiVzhpTENKd2FHOXVaU0k2SWlJc0ltRndjRjl0WlhSaFpHRjBZU0k2ZXlKd2NtOTJhV1JsY2lJNkltVnRZV2xzSWl3aWNISnZkbWxrWlhKeklqcGJJbVZ0WVdsc0lsMTlMQ0oxYzJWeVgyMWxkR0ZrWVhSaElqcDdJbVZ0WVdsc1gzWmxjbWxtYVdWa0lqcDBjblZsTENKMWMyVnlibUZ0WlNJNkluRjNaU0o5TENKeWIyeGxJam9pWVhWMGFHVnVkR2xqWVhSbFpDSXNJbUZoYkNJNkltRmhiREVpTENKaGJYSWlPbHQ3SW0xbGRHaHZaQ0k2SW5CaGMzTjNiM0prSWl3aWRHbHRaWE4wWVcxd0lqb3hOemN3TlRNek1UTTFmVjBzSW5ObGMzTnBiMjVmYVdRaU9pSXhORE16Tm1FMVppMDNNalZsTFRRMFlqVXRZakV6WkMxak9XWTJNVEk0TldFMU5UQWlMQ0pwYzE5aGJtOXVlVzF2ZFhNaU9tWmhiSE5sZlEuc0x2VTJ1cWRsNzJOY3d6MzA3NXNEbFRvdUdJaDAxd3hIYXkxdGh6eUhncyIsInRva2VuX3R5cGUiOiJiZWFyZXIiLCJleHBpcmVzX2luIjozNjAwLCJleHBpcmVzX2F0IjoxNzcwNTM2NzM1LCJyZWZyZXNoX3Rva2VuIjoiZmE2bmNnb2x5Zm9uIiwidXNlciI6eyJpZCI6ImE1ZmIyMzcyLWU3M2YtNGM2OC04MWUxLWQ2OTVlOWE3MmZlMiIsImF1ZCI6ImF1dGhlbnRpY2F0ZWQiLCJyb2xlIjoiYXV0aGVudGljYXRlZCIsImVtYWlsIjoicXdlQGF0b21zLmRlbW8iLCJlbWFpbF9jb25maXJtZWRfYXQiOiIyMDI2LTAyLTA3VDExOjEyOjE1LjMzODMyWiIsInBob25lIjoiIiwiY29uZmlybWVkX2F0IjoiMjAyNi0wMi0wN1QxMToxMjoxNS4zMzgzMloiLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI2LTAyLTA4VDA2OjQ1OjM1Ljk1MjYwMjkzN1oiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwidXNlcm5hbWUiOiJxd2UifSwiaWRlbnRpdGllcyI6W3siaWRlbnRpdHlfaWQiOiJlNTQyNTgyNi1hODZmLTQxNDktYTliZi0wNWY3ODhkYmRmYjEiLCJpZCI6ImE1ZmIyMzcyLWU3M2YtNGM2OC04MWUxLWQ2OTVlOWE3MmZlMiIsInVzZXJfaWQiOiJhNWZiMjM3Mi1lNzNmLTRjNjgtODFlMS1kNjk1ZTlhNzJmZTIiLCJpZGVudGl0eV9kYXRhIjp7ImVtYWlsIjoicXdlQGF0b21zLmRlbW8iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwic3ViIjoiYTVmYjIzNzItZTczZi00YzY4LTgxZTEtZDY5NWU5YTcyZmUyIn0sInByb3ZpZGVyIjoiZW1haWwiLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI2LTAyLTA3VDExOjEyOjE1LjMzMTQ0M1oiLCJjcmVhdGVkX2F0IjoiMjAyNi0wMi0wN1QxMToxMjoxNS4zMzE1NDRaIiwidXBkYXRlZF9hdCI6IjIwMjYtMDItMDdUMTE6MTI6MTUuMzMxNTQ0WiIsImVtYWlsIjoicXdlQGF0b21zLmRlbW8ifV0sImNyZWF0ZWRfYXQiOiIyMDI2LTAyLTA3VDExOjEyOjE1LjMyNDIzNFoiLCJ1cGRhdGVkX2F0IjoiMjAyNi0wMi0wOFQwNjo0NTozNS45NjMzODVaIiwiaXNfYW5vbnltb3VzIjpmYWxzZX0sIndlYWtfcGFzc3dvcmQiOm51bGx9" \
  -d '{
    "messages": [
      {
        "id": "1770533173213",
        "role": "user",
        "content": "帮我创建一个登录表单组件",
        "createdAt": "2026-02-08T06:46:13.213Z"
      }
    ],
    "projectId": "7114290b-a36b-484f-8b4a-7272456f0f51"
  }' \
  -w "\n\nHTTP Status: %{http_code}\nTime Total: %{time_total}s\n" \
  -s

echo ""
echo "测试完成"
