# 1.1 用户认证系统 (Authentication System)

**目标**: 实现完整的用户注册、登录、退出流程，并保护私有页面。

## 任务清单

- [ ] **1. Supabase Auth 配置**
  - [ ] 确认 `src/lib/supabase/client.ts` (或类似) 初始化正确。
  - [ ] 确认 Supabase 项目控制台已启用 Email/Password 登录提供商。

- [ ] **2. 认证页面开发**
  - [ ] 创建 `src/app/auth/layout.tsx`: 认证页面的通用布局（居中容器）。
  - [ ] 创建 `src/app/auth/login/page.tsx`: 登录表单 (Email + Password)。
  - [ ] 创建 `src/app/auth/signup/page.tsx`: 注册表单 (Email + Password + Username)。
  - [ ] 实现表单验证 (建议使用 Zod + React Hook Form)。
  - [ ] 调用 `supabase.auth.signInWithPassword` 和 `signUp`。

- [ ] **3. 为了便利的自动登录 (可选 for MVP)**
  - [ ] 如果需要在开发环境快速登录，可以硬编码一个 "Login as Guest" 按钮。

- [ ] **4. 状态管理 & 保护**
  - [ ] 创建 `src/components/auth-provider.tsx`: 监听 `onAuthStateChange`。
  - [ ] 使用 Context 提供全局 `user` 对象。
  - [ ] 在 `src/app/layout.tsx` 中包裹 `AuthProvider`。
  - [ ] 创建 Middleware (`src/middleware.ts`): 拦截 `/dashboard` 和 `/chat` 开头的路由，未登录重定向到 `/auth/login`。

## 文件清单
- `src/lib/supabase/client.ts`
- `src/app/auth/login/page.tsx`
- `src/app/auth/signup/page.tsx`
- `src/middleware.ts`

## 验证步骤
1. 访问 `/dashboard`，应自动跳转到登录页。
2. 在注册页注册新用户，Supabase 后台应出现新用户。
3. 登录后应跳转回首页或 Dashboard。
