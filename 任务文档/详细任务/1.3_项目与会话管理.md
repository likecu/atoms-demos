# 1.3 项目与会话管理 (Project Management) ✅ 已完成

**目标**: 实现多项目管理，让用户的聊天记录和生成的代码持久化并归档。

## 任务清单

- [x] **1. Dashboard 页面**
  - [x] 创建 `src/app/dashboard/page.tsx`。
  - [x] Fetch 数据: 从 `projects` 表查询当前用户的项目列表 (按 `updated_at` 倒序)。
  - [x] UI 展示: 项目卡片网格 (显示名称、最后更新时间、略缩图/图标)。

- [x] **2. 新建项目逻辑**
  - [x] 实现 "Create Project" API Action。
  - [x] 插入 `projects` 表一条新记录。
  - [x] 创建成功后跳转到 `/chat/[project_id]` (需要修改路由结构)。

- [x] **3. 动态路由改造**
  - [x] 将 `src/app/page.tsx` (Home) 作为 Landing Page (或直接跳转 Dashboard)。
  - [x] 创建 `src/app/chat/[id]/page.tsx`: 该页面加载指定 Project 的上下文。

- [x] **4. 聊天历史加载 & 保存**
  - [x] 修改 `ChatArea`，使其 `useChat` hook 的 `initialMessages` 从数据库加载。
  - [x] 在 `onFinish` 回调中，调用 API 保存 `messages` 到数据库。
  - [x] 确保生成的 Artifact 代码保存到 `projects.current_code` 或 `artifacts` 表。

## 文件清单
- `src/app/dashboard/page.tsx` - Dashboard 服务端页面
- `src/app/dashboard/dashboard-client.tsx` - Dashboard 客户端组件
- `src/app/chat/[id]/page.tsx` - 动态路由聊天页面
- `src/app/chat/[id]/chat-page-client.tsx` - 聊天页面客户端组件
- `src/lib/actions/project.ts` - 项目 CRUD Server Actions
- `src/lib/actions/message.ts` - 消息保存/加载 Server Actions
- `src/lib/supabase-server.ts` - 服务端 Supabase 客户端
- `src/lib/date-utils.ts` - 日期格式化工具
- `src/lib/project-context.tsx` - 项目上下文 Provider
- `src/components/dashboard/project-card.tsx` - 项目卡片组件
- `src/components/landing/landing-page.tsx` - Landing Page 登录/注册

## 验证步骤
1. ✅ 在 Dashboard 点击新建，进入 `/chat/xyz`。
2. ✅ 发送消息，刷新页面，消息不丢失。
3. ✅ 回到 Dashboard，能看到刚才更新的项目。

## 环境配置要求
> ⚠️ 需要在 `.env.local` 中配置以下环境变量：
> - `NEXT_PUBLIC_SUPABASE_URL` - Supabase 项目 URL
> - `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase 匿名密钥
